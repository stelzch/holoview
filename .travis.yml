language: python
python:
    - "3.4"
sudo: required
dist: trusty
arch:
    packages:
        - python
        - python-numpy
        - python-matplotlib
        - python-gobject
        - python-h5py
        - python-pillow
        - python-cairocffi
        - gtksourceview3
        - opencv
        - hdf5
        - xorg-server-xvfb
    script:
        - "xvfb-run -a python3.6 -m holoview.tests.__init__"
        - ". ./build-deb.sh"
script:
    - "curl -s https://raw.githubusercontent.com/mikkeloscar/arch-travis/master/arch-travis.sh | bash"
deploy:
    provider: pages
    skip_cleanup: true
    github_token: $GITHUB_TOKEN
    file_glob: true
    file: "holoview-*.deb" 
    on:
        branch: master

